{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="max-w-5xl mx-auto p-6 space-y-6">
  <h1 class="text-2xl font-bold">Elegí el tipo de camarote</h1>
  <p class="text-sm text-muted">Tocá una card para seleccionar.</p>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mt-4">
    {% for tipo in tipos %}
      <form method="post" class="tipo-card">
        {% csrf_token %}
        <input type="hidden" name="tipo_id" value="{{ tipo.id }}">

        <button type="submit"
                class="block w-full text-left rounded-2xl overflow-hidden border transition hover:shadow-lg focus:outline-none">

          <!-- BLOQUE DE IMAGEN -->
          <div class="h-56 bg-gray-100 flex items-center justify-center">

            {% if tipo.imagen %}
              <!-- Si el tipo tiene imagen, la mostramos -->
              <img src="{{ tipo.imagen.url }}" alt="{{ tipo.nombre }}" class="h-full w-full object-cover">

            {% else %}
              <!-- Placeholder seguro -->
              <img src="{% static 'img/default_camarote.jpg' %}"
                   alt="Imagen no disponible"
                   class="h-full w-full object-cover">
            {% endif %}

          </div>

          <!-- BLOQUE DE INFO -->
          <div class="p-4 bg-white">
            <div class="flex items-start justify-between gap-3">

              <div>
                <h3 class="font-semibold text-lg">{{ tipo.nombre }}</h3>

                <p class="text-sm text-gray-600 mt-2 line-clamp-3">
                  {{ tipo.descripcion|default:"Sin descripción."|truncatechars:120 }}
                </p>
              </div>

              <div class="text-right text-sm">
                <div class="font-bold text-lg">Desde ${{ tipo.precio_base|default:0 }}</div>
                <div class="text-xs text-gray-500 mt-1">
                  Capacidad: Hasta {{ tipo.capacidad_max|default:"?" }} pasajeros
                </div>
              </div>

            </div>
          </div>

        </button>
      </form>
    {% endfor %}
  </div>

  <div class="mt-6">
    <a href="{% url 'ofertas' %}" class="text-sm text-secondary">Volver a ofertas</a>
  </div>

</div>

{% endblock %}
