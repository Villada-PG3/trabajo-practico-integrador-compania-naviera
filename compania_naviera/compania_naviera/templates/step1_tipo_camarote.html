{% extends "base.html" %}
{% load static %}
{% block content %}

<div class="relative max-w-6xl mx-auto p-6 md:p-8">
  <div class="absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-white/90 via-white/70 to-primary/10 shadow-[0_20px_45px_rgba(15,30,99,0.14)]"></div>
  <div class="absolute -left-12 top-6 h-48 w-48 rounded-full bg-secondary/14 blur-3xl"></div>
  <div class="absolute right-8 -bottom-10 h-56 w-56 rounded-full bg-primary/12 blur-3xl"></div>

  <header class="relative flex flex-col md:flex-row md:items-end md:justify-between gap-4">
    <div>
      <p class="uppercase tracking-[0.18em] text-xs font-semibold text-secondary">Paso 1 · Elige tu camarote</p>
      <h1 class="text-3xl md:text-4xl font-extrabold text-primary-dark leading-tight">Elegí el tipo de camarote</h1>
      <p class="text-base text-text/70">Explorá las opciones disponibles. Cada tarjeta muestra una cabina distinta con precio y capacidad.</p>
    </div>
    <a href="{% url 'ofertas' %}" class="self-start md:self-center inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white shadow-md border border-primary/10 text-primary-dark font-semibold hover:bg-primary/5 transition">
      <i class="fa-solid fa-arrow-left-long"></i> Volver a ofertas
    </a>
  </header>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
    {% for tipo in tipos %}
      <form method="post" class="h-full">
        {% csrf_token %}
        <input type="hidden" name="tipo_id" value="{{ tipo.id }}">

        <button type="submit"
                class="group h-full w-full text-left rounded-3xl overflow-hidden border border-primary/10 bg-white shadow-[0_16px_32px_rgba(15,30,99,0.12)] transition hover:-translate-y-1 hover:shadow-[0_24px_40px_rgba(15,30,99,0.16)] focus:outline-none">

          <!-- BLOQUE DE IMAGEN -->
          <div class="relative h-60 overflow-hidden">
            {% if tipo.imagen %}
              <img src="{{ tipo.imagen.url }}" alt="{{ tipo.nombre }}" class="h-full w-full object-cover transition duration-500 group-hover:scale-105">
            {% else %}
              <img src="{{ tipo.fallback_cabin_img }}" alt="{{ tipo.nombre }}" class="h-full w-full object-cover transition duration-500 group-hover:scale-105">
            {% endif %}
            <div class="absolute inset-0 bg-gradient-to-t from-black/35 via-black/15 to-transparent"></div>
            {% if tipo.capacidad_max %}
              <div class="absolute top-3 left-3 inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/85 text-primary-dark text-xs font-semibold shadow-md border border-white/60">
                <i class="fa-solid fa-people-group text-secondary"></i> {{ tipo.capacidad_max }} pax
              </div>
            {% endif %}
            <div class="absolute bottom-3 right-3 inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-secondary text-white text-sm font-semibold shadow-lg">
              <i class="fa-solid fa-tag"></i> Desde ${{ tipo.precio_base|default:0 }}
            </div>
            <div class="absolute bottom-3 left-3 inline-flex items-center gap-2 px-2 py-1.5 rounded-2xl bg-white/90 shadow-md border border-white/70">
              <span class="relative block h-12 w-16 overflow-hidden rounded-xl">
                <img src="{{ tipo.fallback_bath_img }}" alt="Baño {{ tipo.nombre }}" class="h-full w-full object-cover">
              </span>
              <span class="text-[11px] font-semibold text-primary-dark uppercase tracking-[0.15em]">Baño</span>
            </div>
          </div>

          <!-- BLOQUE DE INFO -->
          <div class="p-5 bg-white space-y-3">
            <div class="flex items-start justify-between gap-3">
              <div>
                <h3 class="font-bold text-xl text-primary-dark">{{ tipo.nombre }}</h3>
                <p class="text-sm text-text/75 mt-2 line-clamp-3">
                  {{ tipo.descripcion|default:"Sin descripción."|truncatechars:140 }}
                </p>
              </div>
            </div>
            <div class="flex flex-wrap gap-2 text-xs text-text/70">
              <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-primary/8 border border-primary/15">
                <i class="fa-solid fa-bed text-secondary"></i> Cabina cómoda
              </span>
              <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-primary/8 border border-primary/15">
                <i class="fa-solid fa-person-swimming text-secondary"></i> Acceso a amenities
              </span>
              <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-primary/8 border border-primary/15">
                <i class="fa-solid fa-wifi text-secondary"></i> Wi-Fi incluido
              </span>
            </div>
          </div>

        </button>
      </form>
    {% endfor %}
  </div>
</div>

{% endblock %}
