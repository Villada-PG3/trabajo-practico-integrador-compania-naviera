{% extends "base.html" %}
{% load static %}

{% block title %}Ofertas de Cruceros - SEA STAR{% endblock %}

{% block content %}

<!-- ======= HERO ======= -->
<section class="mx-auto max-w-7xl px-6 lg:px-10 pt-8">
  <div class="rounded-3xl bg-gradient-to-br from-primary/20 via-secondary/15 to-surface/95 border border-secondary/25 p-8 md:p-10 backdrop-blur-xl shadow-neon text-text">
    <div class="space-y-3">
      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-bg/40 border border-secondary/25 text-xs tracking-wider">
        <span class="inline-flex w-5 h-5 items-center justify-center rounded-full bg-primary text-white font-bold">â˜…</span>
        Sea Star Â· Ofertas
      </div>
      <h1 class="text-3xl md:text-4xl font-extrabold">ðŸŒŠ Ofertas Exclusivas</h1>
      <p class="text-text/85 max-w-3xl">
        Â¡DescubrÃ­ escapadas marÃ­timas con precios inigualables! Lujo, confort y paisajes de ensueÃ±o.
        ReservÃ¡ hoy mismo tu crucero ideal.
      </p>
    </div>
  </div>
</section>

<!-- ======= FILTROS DINÃMICOS ======= -->
<!-- ======= FILTROS DINÃMICOS ======= -->
<section class="max-w-7xl mx-auto px-6 lg:px-10 py-8">
  <div class="rounded-2xl border border-secondary/25 bg-gradient-to-br from-surface/70 via-bg/60 to-surface/80 backdrop-blur-xl p-6 md:p-8 shadow-lg">
    <h2 class="text-xl font-semibold text-text mb-4 flex items-center gap-2">
      <i class="fa-solid fa-filter text-primary"></i> Filtrar ofertas
    </h2>

    <form method="get" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
      <!-- Destino -->
      <div class="flex flex-col">
        <label for="destino" class="text-sm font-medium text-text/80 mb-1">Destino</label>
        <input type="text" name="destino" id="destino"
               value="{{ request.GET.destino }}"
               placeholder="Ej: Caribe"
               class="w-full px-3 py-2 rounded-lg bg-bg/70 border border-secondary/30 text-text focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary/40 transition">
      </div>

      <!-- Fecha -->
      <div class="flex flex-col">
        <label for="fecha" class="text-sm font-medium text-text/80 mb-1">Fecha de salida</label>
        <input type="date" name="fecha" id="fecha"
               value="{{ request.GET.fecha }}"
               class="w-full px-3 py-2 rounded-lg bg-bg/70 border border-secondary/30 text-text focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary/40 transition">
      </div>

      <!-- Precio mÃ­nimo -->
      <div class="flex flex-col">
        <label for="precio_min" class="text-sm font-medium text-text/80 mb-1">Precio mÃ­nimo</label>
        <input type="number" name="precio_min" id="precio_min"
               value="{{ request.GET.precio_min }}"
               placeholder="USD"
               min="0"
               class="w-full px-3 py-2 rounded-lg bg-bg/70 border border-secondary/30 text-text focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary/40 transition">
      </div>

      <!-- Precio mÃ¡ximo -->
      <div class="flex flex-col">
        <label for="precio_max" class="text-sm font-medium text-text/80 mb-1">Precio mÃ¡ximo</label>
        <input type="number" name="precio_max" id="precio_max"
               value="{{ request.GET.precio_max }}"
               placeholder="USD"
               min="0"
               class="w-full px-3 py-2 rounded-lg bg-bg/70 border border-secondary/30 text-text focus:outline-none focus:ring-2 focus:ring-primary/60 focus:border-primary/40 transition">
      </div>

      <!-- BotÃ³n -->
      <div class="flex flex-col justify-end">
        <button type="submit"
                class="w-full py-2.5 rounded-lg bg-primary text-white font-medium shadow-md hover:shadow-lg hover:scale-[1.02] transition">
          <i class="fa-solid fa-magnifying-glass"></i> Filtrar
        </button>
      </div>
    </form>
  </div>
</section>


<!-- ======= GRID DE OFERTAS ======= -->
<section class="max-w-7xl mx-auto px-6 lg:px-10 py-8">
  <div id="oCards" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 text-text">

    {% for oferta in ofertas %}
      <a href="{% url 'detalle_oferta' oferta.id %}" 
         class="group relative block rounded-2xl p-[1px] bg-gradient-to-br from-secondary/40 via-secondary/10 to-transparent shadow-neon hover:shadow-2xl transition transform hover:-translate-y-1 duration-300">

        <div class="flex h-full flex-col rounded-2xl card-surface border border-secondary/20 backdrop-blur-sm shadow-lg overflow-hidden">
          
          <!-- Imagen -->
          <div class="relative">
            {% if oferta.navio.imagen %}
              <img src="{{ oferta.navio.imagen }}" alt="{{ oferta.navio.nombre }}" class="w-full h-56 object-cover transition duration-500 group-hover:scale-105">
            {% else %}
              <img src="{% static 'placeholder.jpg' %}" alt="{{ oferta.navio.nombre }}" class="w-full h-56 object-cover transition duration-500 group-hover:scale-105">
            {% endif %}
            <div class="absolute inset-0 bg-gradient-to-t from-surface/85 via-transparent to-transparent"></div>

            <!-- Etiquetas -->
            <span class="absolute top-3 left-3 text-xs px-2 py-1 rounded-full bg-bg/60 text-text/80">
              {{ oferta.categoria_nombre }}
            </span>
            <span class="absolute top-3 right-3 text-xs px-2 py-1 rounded-full bg-primary text-white font-bold shadow-[0_10px_22px_rgba(5,24,36,0.12)]">
              USD {{ oferta.precio }}
            </span>
          </div>

          <!-- Contenido -->
          <div class="p-6 flex flex-col gap-3">
            <h3 class="text-xl font-semibold flex items-center gap-2">
              <i class="fa-solid fa-ship text-secondary"></i> {{ oferta.viaje.nombre }}
            </h3>
            <p class="text-text/75 text-sm">
              {{ oferta.noches }} noches hacia {{ oferta.viaje.lugar_destino }}. 
              {{ oferta.viaje.descripcion|default:"DisfrutÃ¡ de este viaje Ãºnico." }}
            </p>

            <div class="mt-auto flex items-center justify-between gap-3 pt-2 text-xs text-text/70">
              <span class="inline-flex items-center gap-1"><i class="fa-regular fa-moon"></i> {{ oferta.noches }} noches</span>
              <span class="opacity-50">â€¢</span>
              <span class="inline-flex items-center gap-1"><i class="fa-solid fa-location-dot"></i> {{ oferta.viaje.lugar_destino }}</span>
            </div>
          </div>

          <!-- Overlay hover sutil -->
          <div class="absolute inset-0 rounded-2xl bg-black/0 group-hover:bg-black/10 transition"></div>
        </div>
      </a>
    {% empty %}
      <p class="col-span-3 text-center text-text/75">No hay ofertas disponibles en este momento.</p>
    {% endfor %}

  </div>
</section>


{% endblock %}
