{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% block title %}SEA STAR - Cruceros{% endblock %}</title>
  <link rel="icon" type="image/svg+xml" href="{% static 'favicon.svg' %}">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            bg: '#F3F5FF',
            surface: '#FFFFFF',
            'surface-soft': '#F7F4FF',
            primary: '#1F3A93',
            'primary-dark': '#0F1E63',
            secondary: '#7A3EF2',
            'secondary-dark': '#4B1BB2',
            accent: '#B3C4FF',
            text: '#0B1330',
            'text-muted': 'rgba(11, 19, 48, 0.65)'
          },
          boxShadow: {
            neon: '0 12px 32px rgba(15, 30, 99, 0.12)'
          }
        }
      }
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
    :root {
      --bg: #F3F5FF;
      --bg-alt: #E6EBFF;
      --surface: #FFFFFF;
      --surface-soft: #F7F4FF;
      --primary: #1F3A93;
      --primary-dark: #0F1E63;
      --secondary: #7A3EF2;
      --secondary-dark: #4B1BB2;
      --accent: #B3C4FF;
      --accent-dark: #5D53D6;
      --text: #0B1330;
      --text-muted: rgba(11, 19, 48, 0.65);
    }
    html { font-size: 18px; }
    body {
      position: relative;
      background: linear-gradient(180deg, rgba(31, 58, 147, 0.14), rgba(122, 62, 242, 0.05) 45%), var(--bg);
      color: var(--text);
      font-size: 1.05rem;
      font-weight: 500;
      line-height: 1.6;
    }
    body::before,
    body::after {
      content: none;
    }
    p, li, label, input, select, textarea, button { font-size: 1.05rem; }
    small { font-size: 1rem; }
    .text-xs { font-size: 0.95rem !important; }
    .text-sm { font-size: 1rem !important; }
    .text-base { font-size: 1.05rem !important; }
    h1, h2, h3, h4, h5, h6 {
      color: var(--primary-dark);
      font-weight: 700;
      letter-spacing: -0.01em;
    }
    strong, b {
      color: var(--primary);
      font-weight: 700;
    }
    .card-surface {
      background: linear-gradient(180deg, rgba(122, 62, 242, 0.12), rgba(255, 255, 255, 0.96));
      border: 2px solid rgba(122, 62, 242, 0.38);
      box-shadow: 0 10px 28px rgba(15, 30, 99, 0.14);
    }
    .card-soft {
      background: linear-gradient(180deg, rgba(122, 62, 242, 0.2), rgba(243, 245, 255, 0.92));
      border: 2px solid rgba(122, 62, 242, 0.45);
      box-shadow: 0 12px 28px rgba(15, 30, 99, 0.16);
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #FFFFFF;
      border: 2px solid rgba(75, 27, 178, 0.55);
      box-shadow: 0 16px 34px rgba(31, 58, 147, 0.28);
    }
    .btn-primary:hover {
      background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
      color: #FFFFFF;
      transform: translateY(-1px);
      border-color: rgba(75, 27, 178, 0.65);
    }
    .btn-secondary {
      background: rgba(122, 62, 242, 0.12);
      color: var(--secondary-dark);
      border: 2px solid rgba(122, 62, 242, 0.4);
      box-shadow: 0 6px 18px rgba(31, 58, 147, 0.2);
    }
    .btn-secondary:hover {
      background: rgba(122, 62, 242, 0.22);
      border-color: rgba(75, 27, 178, 0.58);
      color: var(--secondary-dark);
    }
    .link-secondary { color: var(--secondary); text-decoration: underline; text-decoration-color: transparent; font-weight: 600; }
    .link-secondary:hover { color: var(--secondary-dark); text-decoration-color: currentColor; }
    .badge-accent {
      background: rgba(122, 62, 242, 0.12);
      color: var(--secondary-dark);
      border: 2px solid rgba(122, 62, 242, 0.35);
      box-shadow: inset 0 1px 3px rgba(31, 58, 147, 0.18);
    }
    .bg-white\/5 { background-color: rgba(255, 255, 255, 0.4) !important; }
    .bg-white\/10 { background-color: rgba(255, 255, 255, 0.65) !important; color: var(--text); }
    .bg-white\/15 { background-color: rgba(255, 255, 255, 0.78) !important; color: var(--text); }
    .bg-white\/20 { background-color: rgba(255, 255, 255, 0.86) !important; color: var(--text); }
    .bg-white\/30 { background-color: rgba(255, 255, 255, 0.95) !important; color: var(--text); }
    .bg-white\/80,
    .bg-white\/90,
    .bg-white\/95 {
      background-color: rgba(255, 255, 255, 0.98) !important;
      color: var(--text);
    }
    .bg-bg\/35 { background-color: rgba(227, 233, 255, 0.74) !important; }
    .bg-bg\/40 { background-color: rgba(227, 233, 255, 0.8) !important; }
    .bg-bg\/50 { background-color: rgba(227, 233, 255, 0.88) !important; }
    .bg-bg\/60 { background-color: rgba(227, 233, 255, 0.92) !important; }
    .bg-bg\/70 { background-color: rgba(227, 233, 255, 0.96) !important; }
    .border-white\/10 { border-color: rgba(31, 58, 147, 0.24) !important; }
    .border-white\/15 { border-color: rgba(31, 58, 147, 0.32) !important; }
    .border-white\/20 { border-color: rgba(31, 58, 147, 0.4) !important; }
    .border-white\/30 { border-color: rgba(75, 27, 178, 0.45) !important; }
    .border-white\/40 { border-color: rgba(75, 27, 178, 0.55) !important; }
    .border-primary\/35 { border-color: rgba(31, 58, 147, 0.7) !important; border-width: 2px !important; }
    .border-primary\/40 { border-color: rgba(31, 58, 147, 0.78) !important; border-width: 2px !important; }
    .border-primary\/45 { border-color: rgba(15, 30, 99, 0.86) !important; border-width: 2px !important; }
    .border-secondary\/15 { border-color: rgba(122, 62, 242, 0.42) !important; border-width: 2px !important; }
    .border-secondary\/20 { border-color: rgba(122, 62, 242, 0.5) !important; border-width: 2px !important; }
    .border-secondary\/25 { border-color: rgba(122, 62, 242, 0.58) !important; border-width: 2px !important; }
    .border-secondary\/30 { border-color: rgba(122, 62, 242, 0.66) !important; border-width: 2px !important; }
    .border-secondary\/35 { border-color: rgba(122, 62, 242, 0.74) !important; border-width: 2px !important; }
    .border-secondary\/40 { border-color: rgba(75, 27, 178, 0.8) !important; border-width: 2px !important; }
    .border-secondary\/45 { border-color: rgba(75, 27, 178, 0.86) !important; border-width: 2px !important; }
    .text-white { color: #FFFFFF !important; }
    .text-orange-400, .text-orange-300, .text-orange-200, .text-orange-100 { color: var(--secondary) !important; }
    .bg-orange-500, .bg-orange-400 { background-color: var(--secondary) !important; color: #FFFFFF; }
    .bg-orange-600, .bg-orange-700 { background-color: var(--secondary-dark) !important; color: #FFFFFF; }
    .hover\:bg-orange-600:hover, .hover\:bg-orange-500:hover { background-color: var(--secondary-dark) !important; color: #FFFFFF; }
    .from-orange-400 { --tw-gradient-from: rgba(122, 62, 242, 0.32) var(--tw-gradient-from-position); --tw-gradient-to: rgba(122, 62, 242, 0) var(--tw-gradient-to-position); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
    .to-orange-600 { --tw-gradient-to: rgba(31, 58, 147, 0.28) var(--tw-gradient-to-position); }
    .text-blue-900, .text-blue-700, .text-blue-600 { color: var(--primary-dark) !important; }
    .bg-blue-900, .bg-blue-800, .bg-blue-600 { background-color: var(--primary) !important; color: #FFFFFF; }
    .from-blue-600 { --tw-gradient-from: rgba(31, 58, 147, 0.46) var(--tw-gradient-from-position); --tw-gradient-to: rgba(31, 58, 147, 0) var(--tw-gradient-to-position); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to); }
    .via-blue-500 { --tw-gradient-stops: var(--tw-gradient-from), rgba(122, 62, 242, 0.28), var(--tw-gradient-to); }
    .to-purple-500 { --tw-gradient-to: rgba(122, 62, 242, 0.26) var(--tw-gradient-to-position); }
    .focus\:ring-orange-400:focus, .focus\:ring-orange-200\/70:focus { --tw-ring-color: rgba(31, 58, 147, 0.55); }
    .border-orange-400\/40, .border-orange-400\/30 { border-color: rgba(31, 58, 147, 0.44) !important; }
    .border-orange-400, .border-orange-300 { border-color: rgba(31, 58, 147, 0.52) !important; }
    .bg-green-500\/20 { background-color: rgba(235, 238, 255, 0.95) !important; color: var(--primary-dark); }
    .border-green-400\/50 { border-color: rgba(31, 58, 147, 0.6) !important; }
    .form-control {
      background-color: rgba(255, 255, 255, 0.96);
      color: var(--text);
      border: 2px solid rgba(31, 58, 147, 0.45);
      border-width: 2px;
      font-size: 1.05rem;
      box-shadow: 0 6px 18px rgba(15, 30, 99, 0.12);
      transition: border-color 180ms ease, box-shadow 180ms ease, background-color 180ms ease;
    }
    .form-control::placeholder { color: var(--text-muted); }
    .form-control:hover {
      border-color: rgba(75, 27, 178, 0.52);
    }
    .form-control:focus {
      border-color: rgba(31, 58, 147, 0.75);
      background-color: rgba(255, 255, 255, 1);
      box-shadow: 0 0 0 3px rgba(31, 58, 147, 0.18);
    }
    .nav-link {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.55rem 1.25rem;
      color: rgba(255, 255, 255, 0.88);
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.88rem;
      letter-spacing: 0.16em;
      border-radius: 9999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.04));
      box-shadow: inset 0 0 0 rgba(255, 255, 255, 0.24);
      backdrop-filter: blur(6px);
      transition: color 180ms ease, transform 200ms ease, border-color 200ms ease, box-shadow 200ms ease;
    }
    .nav-link::before {
      content: "";
      position: absolute;
      inset: -2px;
      border-radius: inherit;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(122, 62, 242, 0.25), rgba(31, 58, 147, 0.35));
      opacity: 0;
      transform: scale(0.9);
      transition: opacity 220ms ease, transform 220ms ease;
      z-index: -1;
      filter: blur(2px);
    }
    .nav-link::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: linear-gradient(120deg, rgba(255, 255, 255, 0.35), rgba(122, 62, 242, 0.2));
      opacity: 0;
      transition: opacity 200ms ease;
      z-index: -2;
      filter: blur(14px);
    }
    .nav-link:hover,
    .nav-link:focus-visible {
      color: #FFFFFF;
      transform: translateY(-2px) scale(1.02);
      border-color: rgba(255, 255, 255, 0.45);
      box-shadow: 0 12px 24px rgba(15, 30, 99, 0.35), inset 0 0 12px rgba(255, 255, 255, 0.18);
    }
    .nav-link:hover::before,
    .nav-link:focus-visible::before {
      opacity: 1;
      transform: scale(1.08);
    }
    .nav-link:hover::after,
    .nav-link:focus-visible::after {
      opacity: 1;
    }
    .nav-link:focus-visible {
      outline: none;
      box-shadow: 0 14px 28px rgba(15, 30, 99, 0.4), 0 0 0 3px rgba(255, 255, 255, 0.38);
    }
    .navbar {
      background: linear-gradient(135deg, rgba(15, 30, 99, 0.95), rgba(122, 62, 242, 0.85));
      border-bottom: 2px solid rgba(10, 21, 71, 0.55);
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 18px rgba(15, 30, 99, 0.2);
    }

    .nav-avatar {
      width: 2.75rem;
      height: 2.75rem;
      border-radius: 9999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: #FFFFFF;
      background: linear-gradient(135deg, rgba(31, 58, 147, 0.95), rgba(122, 62, 242, 0.9));
      border: 1px solid rgba(255, 255, 255, 0.42);
      box-shadow: 0 12px 24px rgba(15, 30, 99, 0.28);
      transition: transform 180ms ease, box-shadow 180ms ease, background 180ms ease, color 180ms ease;
    }
    .nav-avatar:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.55);
      outline-offset: 3px;
    }
    .nav-avatar svg {
      color: currentColor;
    }
    .nav-avatar:hover,
    .nav-avatar:focus-visible {
      transform: translateY(-2px);
      box-shadow: 0 16px 30px rgba(15, 30, 99, 0.34);
    }
    .nav-avatar--ghost {
      color: var(--primary-dark);
      background: rgba(255, 255, 255, 0.92);
      border: 1px solid rgba(31, 58, 147, 0.2);
      box-shadow: 0 10px 24px rgba(15, 30, 99, 0.18);
    }
    .nav-avatar--ghost:hover {
      color: #FFFFFF;
      background: linear-gradient(135deg, rgba(31, 58, 147, 0.95), rgba(122, 62, 242, 0.9));
      border-color: rgba(31, 58, 147, 0.24);
    }
    .nav-avatar--ghost:focus-visible {
      color: var(--primary-dark);
      background: rgba(255, 255, 255, 0.98);
      border-color: rgba(31, 58, 147, 0.32);
      box-shadow: 0 14px 26px rgba(15, 30, 99, 0.24);
      outline: 2px solid rgba(31, 58, 147, 0.35);
      outline-offset: 3px;
    }

    .user-dropdown {
      background: linear-gradient(165deg, rgba(255, 255, 255, 0.98), rgba(236, 236, 255, 0.92));
      border: 1px solid rgba(31, 58, 147, 0.14);
      box-shadow: 0 24px 48px rgba(15, 30, 99, 0.18);
      border-radius: 1.2rem;
      padding: 1.1rem;
      color: var(--text);
      backdrop-filter: blur(14px);
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      min-width: 14rem;
    }
    .user-dropdown__header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding-bottom: 0.65rem;
      border-bottom: 1px solid rgba(31, 58, 147, 0.12);
    }
    .user-dropdown__badge {
      width: 2.4rem;
      height: 2.4rem;
      border-radius: 0.9rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: #FFFFFF;
      background: linear-gradient(135deg, rgba(122, 62, 242, 0.92), rgba(31, 58, 147, 0.92));
      box-shadow: 0 12px 22px rgba(31, 58, 147, 0.2);
    }
    .user-dropdown__name {
      color: var(--primary);
      font-weight: 600;
      font-size: 0.95rem;
    }
    .user-dropdown__links {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }
    .user-dropdown__link {
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      padding: 0.55rem 0.7rem;
      border-radius: 0.85rem;
      color: var(--text);
      font-weight: 500;
      transition: background 200ms ease, color 200ms ease, transform 200ms ease;
    }
    .user-dropdown__link i {
      color: var(--secondary);
      font-size: 0.9rem;
    }
    .user-dropdown__link:hover,
    .user-dropdown__link:focus-visible {
      background: rgba(122, 62, 242, 0.14);
      color: var(--secondary-dark);
      transform: translateX(2px);
    }
    .user-dropdown__link:hover i,
    .user-dropdown__link:focus-visible i {
      color: var(--secondary-dark);
    }
    .user-dropdown__action {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--secondary-dark), var(--secondary));
      border: none;
      box-shadow: 0 12px 24px rgba(31, 58, 147, 0.2);
      margin-top: 0.1rem;
      padding: 0.65rem 0.9rem;
      border-radius: 0.9rem;
      letter-spacing: 0.05em;
      font-weight: 600;
      transition: transform 180ms ease, box-shadow 180ms ease;
    }
    .user-dropdown__action:hover,
    .user-dropdown__action:focus-visible {
      transform: translateY(-1px);
      box-shadow: 0 16px 30px rgba(31, 58, 147, 0.26);
    }
    .user-dropdown__action:hover {
      background: linear-gradient(135deg, var(--secondary), var(--accent-dark));
    }
  </style>
</head>
<body class="min-h-screen font-sans text-text antialiased">

  <!-- Navigation -->
  <nav class="navbar text-white px-6 py-4 flex justify-between items-center">
    <div class="flex items-center gap-3">
      <a href="{% if user.is_authenticated %}{% url 'menu_user' %}{% else %}{% url 'home' %}{% endif %}"
         class="flex items-center gap-3 transition hover:text-primary">
        <div class="w-10 h-10 rounded-full bg-secondary text-white flex items-center justify-center font-bold text-lg shadow-[0_12px_22px_rgba(122,62,242,0.32)] border border-secondary/40">★</div>
        <span class="font-bold text-xl tracking-wide text-secondary">SEA STAR</span>
      </a>
    </div>

    <div class="hidden md:flex items-center gap-8 font-medium">

      {% if user.is_authenticated %}
        <a href="{% url 'mis_reservas' %}" class="nav-link transition">Mis reservas</a>
      {% endif %}

      <a href="{% url 'contacto' %}" class="nav-link transition">Contáctanos</a>
      <a href="{% url 'cruceros' %}" class="nav-link transition">Cruceros</a>
      <a href="{% url 'destinos' %}" class="nav-link transition">Destinos</a>
      <a href="{% url 'ofertas' %}" class="nav-link transition">Ofertas</a>

      {% if user.is_authenticated %}
        <!-- Dropdown usuario -->
        <div class="relative" x-data="{ open: false }">
          <button @click="open = !open"
                  class="nav-avatar" aria-label="Abrir menú de usuario">
            <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"
                 class="text-current" viewBox="0 0 24 24">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </button>

          <div x-show="open" @click.away="open = false"
               class="absolute right-0 mt-3 w-56 user-dropdown z-50">
            <div class="user-dropdown__header">
              <span class="user-dropdown__badge">{{ user.username|slice:":1"|upper }}</span>
              <div>
                <p class="user-dropdown__name">{{ user.username }}</p>
                <small class="text-xs" style="color: rgba(11, 19, 48, 0.55);">Cuenta activa</small>
              </div>
            </div>

            <div class="user-dropdown__links">
              <a href="{% url 'editar_perfil' %}" 
                 class="user-dropdown__link text-sm focus-visible:outline-none">
                <i class="fa fa-user"></i>Editar perfil
              </a>

              <a href="{% url 'cambiar_contrasenia' %}" 
                 class="user-dropdown__link text-sm focus-visible:outline-none">
                <i class="fa fa-key"></i>Cambiar contraseña
              </a>
            </div>

            <form method="POST" action="{% url 'logout' %}" class="mt-1">
              {% csrf_token %}
              <button type="submit" 
                      class="user-dropdown__action w-full text-white focus-visible:outline-none">
                Cerrar sesión
              </button>
            </form>
          </div>
        </div>
      {% else %}
        <!-- Botón login -->
        <a href="{% url 'login' %}"
           class="nav-avatar nav-avatar--ghost transition">
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"
               class="text-current" viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
        </a>
      {% endif %}
    </div>
  </nav>

  <!-- Contenido dinámico -->
  <main class="p-6 sm:p-10">
    {% block content %}{% endblock %}
  </main>

  <footer class="px-6 sm:px-10 pb-10">
    <div class="max-w-7xl mx-auto rounded-2xl border border-white/15 bg-white/10 backdrop-blur-xl px-6 py-5 flex flex-col gap-3 text-sm text-text/75 sm:flex-row sm:items-center sm:justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-primary/20 text-primary flex items-center justify-center font-semibold">★</div>
        <div>
          <p class="font-semibold text-text">SEA STAR Cruceros</p>
          <p class="text-text/60">Experiencias marítimas diseñadas para sorprenderte.</p>
          <!-- CAMBIO MUY CHIQUITO: micro tagline de marca -->
          <small class="text-text/40">Hecho con ♥ en Argentina</small>
        </div>
      </div>
      <div class="flex flex-col gap-1 sm:text-right text-text/60">
        <span class="flex items-center gap-2 sm:justify-end"><i class="fa-solid fa-envelope"></i> contacto@seastar.com</span>
        <span class="flex items-center gap-2 sm:justify-end"><i class="fa-brands fa-whatsapp"></i> +54 351 000 0000</span>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const sliders = document.querySelectorAll("[data-slider]");
      sliders.forEach(function (slider) {
        const track = slider.querySelector("[data-slider-track]");
        if (!track) {
          return;
        }

        const slides = track.children.length;
        if (slides <= 1) {
          return;
        }

        let index = 0;
        const indicators = slider.querySelectorAll("[data-slider-indicator]");

        const updateSlider = function () {
          track.style.transform = `translateX(-${index * 100}%)`;
          indicators.forEach(function (dot, dotIndex) {
            const isActive = dotIndex === index;
            dot.classList.toggle("opacity-100", isActive);
            dot.classList.toggle("opacity-40", !isActive);
            dot.classList.toggle("scale-125", isActive);
          });
        };

        slider.querySelector("[data-slider-next]")?.addEventListener("click", function (event) {
          event.preventDefault();
          event.stopPropagation();
          index = (index + 1) % slides;
          updateSlider();
        });

        slider.querySelector("[data-slider-prev]")?.addEventListener("click", function (event) {
          event.preventDefault();
          event.stopPropagation();
          index = (index - 1 + slides) % slides;
          updateSlider();
        });

        indicators.forEach(function (dot, dotIndex) {
          dot.addEventListener("click", function (event) {
            event.preventDefault();
            event.stopPropagation();
            index = dotIndex;
            updateSlider();
          });
        });

        updateSlider();
      });
    });
  </script>
  <script src="//unpkg.com/alpinejs" defer></script>
</body>
</html>
