{% extends "base.html" %}
{% block title %}Destinos - SEA STAR{% endblock %}

{% block content %}
<section class="mx-auto max-w-7xl px-6 lg:px-10 py-10">
  <!-- Encabezado reducido -->
  <header class="text-center mb-12">
    <h1 class="text-4xl font-bold text-text">Destinos destacados</h1>
    <p class="mt-2 text-sm text-text/70 max-w-2xl mx-auto">
      Elegí tu próxima escala y descubrí los puertos más emblemáticos del mundo.
    </p>
  </header>

  <!-- Cards de destinos -->
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 mb-16">
    {% for puerto in destinos %}
      <a href="{% url 'destino_detail' puerto.pk %}"
         class="group block overflow-hidden rounded-3xl border border-primary/35 bg-surface/80 p-6 shadow-sm transition duration-300 hover:-translate-y-1 hover:shadow-md hover:border-secondary/45">
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-semibold text-text group-hover:text-secondary-dark flex items-center gap-2">
            <i class="fa-solid fa-location-dot text-secondary-dark"></i>
            {{ puerto.nombre }}
          </h2>
          <span class="text-xs text-text/50">#{{ forloop.counter }}</span>
        </div>

        {% if puerto.itinerario %}
          <p class="mt-2 text-xs uppercase tracking-wide text-secondary-dark/80">
            {{ puerto.itinerario.categoria.nombre }}
          </p>
        {% endif %}

        {% if puerto.ubicaciones.all %}
          <p class="mt-3 text-sm text-text/70">
            {% for ubicacion in puerto.ubicaciones.all %}
              {{ ubicacion.nombre }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </p>
        {% endif %}

        {% if puerto.actividades.all %}
          <ul class="mt-4 space-y-1 text-sm text-text/75">
            {% for act in puerto.actividades.all|slice:":2" %}
              <li class="flex items-start gap-2">
                <span class="mt-[6px] h-1.5 w-1.5 rounded-full bg-secondary-dark"></span>
                {{ act.actividad.nombre }}
              </li>
            {% endfor %}
            {% if puerto.actividades.count > 2 %}
              <li class="text-text/50 text-xs italic">+ más actividades...</li>
            {% endif %}
          </ul>
        {% endif %}
      </a>
    {% empty %}
      <div class="sm:col-span-2 lg:col-span-3 text-center py-20 border border-dashed border-primary/35 rounded-3xl bg-bg/40">
        <p class="text-xl font-semibold text-text">No hay destinos disponibles por el momento.</p>
        <p class="mt-2 text-sm text-text/60">Vuelve pronto para descubrir nuevas rutas marítimas.</p>
      </div>
    {% endfor %}
  </div>

  <!-- Card "Planificá tu recorrido" -->
  <div class="max-w-md mx-auto">
    <div class="rounded-3xl border border-primary/35 bg-surface/85 p-6 text-center shadow-sm transition hover:shadow-md">
      <h3 class="text-2xl font-bold text-text mb-2">Planificá tu recorrido</h3>
      <p class="text-sm text-text/70 mb-4">
        Seleccioná los puertos que más te inspiran y explorá los cruceros disponibles.
      </p>
      <a href="{% url 'cruceros' %}"
         class="inline-flex items-center gap-2 rounded-full btn-primary px-5 py-3 text-sm font-semibold transition hover:scale-[1.02]">
        <i class="fa-solid fa-ship"></i> Ver cruceros disponibles
      </a>
    </div>
  </div>

</section>
{% endblock %}
