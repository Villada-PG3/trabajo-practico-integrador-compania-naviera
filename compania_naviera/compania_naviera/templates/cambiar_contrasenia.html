{% extends "base.html" %}
{% load static %}

{% block title %}Cambiar contraseña - SEA STAR{% endblock %}

{% block content %}
<section class="min-h-[70vh] flex items-center justify-center px-6 py-12">
  <div class="relative w-full max-w-lg card-surface rounded-3xl p-8 md:p-10 shadow-lg space-y-6">
    <div class="space-y-2 text-center">
      <span class="inline-flex h-12 w-12 items-center justify-center rounded-full bg-primary text-white text-xl font-bold shadow-[0_12px_30px_rgba(148,163,235,0.22)]">★</span>
      <h1 class="text-3xl font-semibold text-text">Cambiar contraseña</h1>
      <p class="text-sm text-text/75">Por seguridad, asegurate de elegir una clave única y combinar números, letras y símbolos.</p>
    </div>

    {% if messages %}
    <div class="space-y-2">
      {% for message in messages %}
        <div class="rounded-lg px-3 py-2 text-sm {% if message.tags == 'success' %}badge-accent{% elif message.tags == 'error' %}bg-secondary/20 border border-secondary/40 text-secondary-dark{% else %}bg-bg/40 border border-secondary/30{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
    {% endif %}

    <form method="POST" class="space-y-5">
      {% csrf_token %}
      {% for field in form %}
        <div class="space-y-1">
          <label for="{{ field.id_for_label }}" class="text-sm font-medium text-text/90">{{ field.label }}</label>
          {{ field }}
          {% if field.errors %}
            <p class="text-xs text-secondary-dark">{{ field.errors|striptags }}</p>
          {% endif %}
        </div>
      {% endfor %}
      <button type="submit" class="w-full rounded-xl py-3 font-semibold btn-primary transition hover:scale-[1.01]">
        Actualizar contraseña
      </button>
    </form>

    <div class="text-center text-sm">
      <a href="{% url 'menu_user' %}" class="link-secondary inline-flex items-center gap-2 justify-center">
        <i class="fa-solid fa-arrow-left"></i> Volver al menú
      </a>
    </div>

    <div class="pointer-events-none absolute -top-8 -right-10 h-32 w-32 rounded-full bg-secondary/15 blur-3xl"></div>
    <div class="pointer-events-none absolute -bottom-12 -left-8 h-28 w-28 rounded-full bg-accent/20 blur-3xl"></div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('form input').forEach((input) => {
      input.classList.add(
        'w-full','rounded-lg','bg-white/80','border','border-primary/40','px-4','py-3','text-text','placeholder-text/50','focus:outline-none','focus:ring-2','focus:ring-primary/60'
      );
    });
  });
</script>
{% endblock %}
