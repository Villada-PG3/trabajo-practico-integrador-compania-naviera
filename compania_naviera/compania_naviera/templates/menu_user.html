{% extends "base.html" %}

{% block title %}Panel de Usuario - SEA STAR{% endblock %}

{% block content %}
<main class="max-w-7xl mx-auto px-4 md:px-6 py-10 space-y-10">

  <!-- Encabezado -->
  <header class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
    <div>
      <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">Â¡Hola, {{ user.first_name|default:user.username }}!</h1>
      <p class="text-text/80">Bienvenido a tu panel. RevisÃ¡ tus reservas y prÃ³ximas experiencias.</p>
    </div>
    <div class="flex flex-wrap items-center gap-3">
      <a href="{% url 'editar_perfil' %}" class="px-4 py-2 rounded-xl btn-secondary transition">
        <i class="fa fa-user mr-2"></i> Editar perfil
      </a>
      <a href="{% url 'cambiar_contrasenia' %}" class="px-4 py-2 rounded-xl btn-secondary transition">
        <i class="fa fa-key mr-2"></i> Cambiar contraseÃ±a
      </a>
      <a href="{% url 'crear_reserva' %}" class="px-4 py-2 rounded-xl btn-primary transition font-semibold hover:scale-[1.02]">
        <i class="fa fa-plus mr-2"></i> Nueva reserva
      </a>
    </div>
  </header>

  <!-- KPI Cards (3 columnas) -->
  <section class="grid grid-cols-1 sm:grid-cols-3 gap-6">
    <article class="card-surface rounded-2xl p-6 shadow-neon">
      <div class="text-sm text-text/65 uppercase tracking-wide">Reservas totales</div>
      <div class="mt-2 text-3xl font-bold text-primary">{{ reservas_total|default:0 }}</div>
      <a href="{% url 'mis_reservas' %}" class="text-sm mt-3 inline-flex items-center gap-1 link-secondary">
        Ver reservas <i class="fa fa-arrow-right text-xs"></i>
      </a>
    </article>

    <article class="card-surface rounded-2xl p-6 shadow-neon">
      <div class="text-sm text-text/65 uppercase tracking-wide">Reservas activas</div>
      <div class="mt-2 text-3xl font-bold text-primary">{{ reservas_activas|default:0 }}</div>
      <a href="{% url 'mis_reservas' %}" class="text-sm mt-3 inline-flex items-center gap-1 link-secondary">
        Administrar <i class="fa fa-arrow-right text-xs"></i>
      </a>
    </article>

    <article class="card-surface rounded-2xl p-6 shadow-neon">
      <div class="text-sm text-text/65 uppercase tracking-wide">Ofertas</div>
      <div class="mt-2 text-3xl font-bold text-primary">
        {{ ofertas_destacadas|length|default:0 }}
      </div>
      <a href="{% url 'ofertas' %}" class="text-sm mt-3 inline-flex items-center gap-1 link-secondary">
        Ver ofertas <i class="fa fa-arrow-right text-xs"></i>
      </a>
    </article>
  </section>

  <!-- Accesos rÃ¡pidos -->
  <section class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
    <a href="{% url 'mis_reservas' %}" class="group card-surface hover:-translate-y-1 rounded-2xl p-6 shadow-neon transition duration-300">
      <div class="text-4xl mb-3">ğŸ“…</div>
      <h3 class="text-lg font-semibold mb-1">Mis Reservas</h3>
      <p class="text-text/75">RevisÃ¡ y administrÃ¡ tus reservas de crucero.</p>
    </a>

    <a href="{% url 'cruceros' %}" class="group card-surface hover:-translate-y-1 rounded-2xl p-6 shadow-neon transition duration-300">
      <div class="text-4xl mb-3">ğŸ›³</div>
      <h3 class="text-lg font-semibold mb-1">Cruceros</h3>
      <p class="text-text/75">ExplorÃ¡ prÃ³ximos viajes y reservÃ¡ tu lugar.</p>
    </a>

    <a href="{% url 'destinos' %}" class="group card-surface hover:-translate-y-1 rounded-2xl p-6 shadow-neon transition duration-300">
      <div class="text-4xl mb-3">ğŸ“</div>
      <h3 class="text-lg font-semibold mb-1">Destinos</h3>
      <p class="text-text/75">ConocÃ© nuestros puertos y experiencias.</p>
    </a>

    <a href="{% url 'ofertas' %}" class="group card-surface hover:-translate-y-1 rounded-2xl p-6 shadow-neon transition duration-300">
      <div class="text-4xl mb-3">ğŸ”¥</div>
      <h3 class="text-lg font-semibold mb-1">Ofertas</h3>
      <p class="text-text/75">Promos vigentes y descuentos.</p>
    </a>
  </section>

  <!-- PrÃ³ximos cruceros -->
  <section>
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-2xl font-bold">PrÃ³ximos cruceros</h2>
      <a href="{% url 'cruceros' %}" class="text-sm link-secondary">Ver todos</a>
    </div>

    {% if proximos_cruceros %}
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {% for px in proximos_cruceros %}
          <article class="card-surface rounded-2xl overflow-hidden shadow-neon transition duration-300 hover:-translate-y-1">
            <div class="aspect-[16/9] bg-bg/40 flex items-center justify-center text-5xl">ğŸ›³</div>
            <div class="p-5 space-y-2">
              <h3 class="font-semibold text-lg text-text">{{ px.nombre }}</h3>
              <p class="text-text/75">{{ px.fecha }}</p>
              <p class="text-text/80">NavÃ­o: {{ px.navio_nombre|default:"(sin asignar)" }}</p>

              {% if px.navio_id %}
                <a href="{% url 'navio_detail' px.navio_id %}" class="inline-flex items-center gap-2 link-secondary">
                  Ver detalles <i class="fa fa-arrow-right text-xs"></i>
                </a>
              {% else %}
                <span class="text-text/60 text-sm">Sin navÃ­o asignado</span>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-text/70">No tenÃ©s cruceros prÃ³ximos por ahora.</p>
    {% endif %}
  </section>

</main>

<footer class="text-center text-sm text-text/65 mt-16 mb-6">
  &copy; {{ now|date:"Y" }} SEA STAR. Todos los derechos reservados.
</footer>
{% endblock %}
