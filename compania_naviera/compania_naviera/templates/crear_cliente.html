{% extends "base.html" %}

{% block content %}
<div class="flex flex-col justify-center items-center min-h-[80vh] px-4 py-12 space-y-4">
    <div class="text-center space-y-2">
        <h2 class="text-2xl font-bold">Completa tus datos de cliente</h2>
        <p class="text-text/75">Antes de crear una reserva, necesitamos que completes tu perfil.</p>
    </div>

    {% if messages %}
      <div class="w-full max-w-md space-y-2">
          {% for message in messages %}
              <div class="w-full p-3 rounded {% if message.tags == 'success' %}badge-accent{% elif message.tags == 'error' %}bg-secondary/20 border border-secondary/40 text-secondary-dark{% else %}bg-bg/40 border border-secondary/30{% endif %}">
                  {{ message }}
              </div>
          {% endfor %}
      </div>
    {% endif %}

    <form method="POST" class="w-full max-w-md card-surface rounded-3xl shadow-lg p-8 space-y-4" novalidate>
        {% csrf_token %}

        {# --- IMPORTANTE: preserva el flujo del wizard --- #}
        <input type="hidden" name="viaje_navio_id" value="{{ viaje_navio_id|default_if_none:'' }}">


        {% for field in form %}
            <div class="flex flex-col mb-2 space-y-1">
                <label for="{{ field.id_for_label }}" class="mb-1 text-sm font-medium text-text/90">{{ field.label }}</label>
                {{ field }}
                {% if field.errors %}
                    <div class="text-secondary-dark text-sm mt-1">
                        {% for error in field.errors %}
                            {{ error }}
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        {% endfor %}

        <button type="submit" class="w-full btn-primary py-3 rounded-xl font-semibold transition hover:scale-[1.01]">
            Guardar y continuar
        </button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('form input').forEach((input) => {
    input.classList.add(
      'w-full','rounded-lg','border','border-secondary/25','bg-bg/40','px-4','py-3','text-text',
      'placeholder-text/50','focus:outline-none','focus:ring-2','focus:ring-primary/60'
    );
  });
});
</script>
{% endblock %}
